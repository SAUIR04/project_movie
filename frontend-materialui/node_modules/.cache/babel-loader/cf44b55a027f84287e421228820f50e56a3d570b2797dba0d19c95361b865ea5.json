{"ast":null,"code":"import React,{useState,useContext}from'react';import{useNavigate}from'react-router-dom';import{Box,Container,Typography,TextField,Button,Alert,Paper,IconButton,InputAdornment,CircularProgress,useTheme,useMediaQuery}from'@mui/material';import{Visibility,VisibilityOff}from'@mui/icons-material';import{AuthContext}from'../contexts/AuthContext';import API_BASE_URL from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const theme=useTheme();const isMobile=useMediaQuery(theme.breakpoints.down('sm'));const{login}=useContext(AuthContext);const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[showPassword,setShowPassword]=useState(false);const[message,setMessage]=useState('');const[messageType,setMessageType]=useState('');const[isLoading,setIsLoading]=useState(false);const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);try{const response=await fetch(`${API_BASE_URL}/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});const data=await response.json();setIsLoading(false);if(data.success){login(data.token,username);navigate('/tovars');}else{setMessage(data.message||'Authentication failed');setMessageType('error');}}catch(error){setIsLoading(false);setMessage('Login failed. Please try again.');setMessageType('error');}};return/*#__PURE__*/_jsx(Container,{maxWidth:\"xs\",sx:{height:'100vh',display:'flex',alignItems:'center',justifyContent:'center',bgcolor:theme.palette.background.default},children:/*#__PURE__*/_jsx(Paper,{elevation:6,sx:{p:isMobile?3:5,width:'100%',borderRadius:3,boxShadow:theme.shadows[10],transition:'transform 0.3s','&:hover':{transform:'translateY(-2px)'}},children:/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,sx:{display:'flex',flexDirection:'column',gap:3},children:[/*#__PURE__*/_jsx(Typography,{variant:isMobile?'h5':'h4',align:\"center\",fontWeight:700,color:\"primary\",sx:{mb:3},children:\"Admin Login\"}),message&&/*#__PURE__*/_jsx(Alert,{severity:messageType==='error'?'error':'success',sx:{mb:2,border:`1px solid ${theme.palette[messageType].light}`,bgcolor:theme.palette[messageType].lighter},children:message}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Username\",value:username,onChange:e=>setUsername(e.target.value),required:true,autoFocus:true,InputProps:{style:{borderRadius:8}},InputLabelProps:{shrink:true},variant:\"outlined\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Password\",type:showPassword?'text':'password',value:password,onChange:e=>setPassword(e.target.value),required:true,InputProps:{style:{borderRadius:8},endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>setShowPassword(!showPassword),edge:\"end\",children:showPassword?/*#__PURE__*/_jsx(VisibilityOff,{}):/*#__PURE__*/_jsx(Visibility,{})})})},InputLabelProps:{shrink:true},variant:\"outlined\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",size:\"large\",disabled:isLoading,sx:{mt:2,mb:2,borderRadius:20,py:1.5,boxShadow:theme.shadows[4],transition:'transform 0.2s','&:hover':{transform:'translateY(-1px)'}},startIcon:isLoading&&/*#__PURE__*/_jsx(CircularProgress,{size:20}),children:isLoading?'Signing In...':'Login'})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useContext","useNavigate","Box","Container","Typography","TextField","Button","Alert","Paper","IconButton","InputAdornment","CircularProgress","useTheme","useMediaQuery","Visibility","VisibilityOff","AuthContext","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","Login","theme","isMobile","breakpoints","down","login","username","setUsername","password","setPassword","showPassword","setShowPassword","message","setMessage","messageType","setMessageType","isLoading","setIsLoading","navigate","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","success","token","error","maxWidth","sx","height","display","alignItems","justifyContent","bgcolor","palette","background","default","children","elevation","p","width","borderRadius","boxShadow","shadows","transition","transform","component","onSubmit","flexDirection","gap","variant","align","fontWeight","color","mb","severity","border","light","lighter","fullWidth","label","value","onChange","target","required","autoFocus","InputProps","style","InputLabelProps","shrink","type","endAdornment","position","onClick","edge","size","disabled","mt","py","startIcon"],"sources":["/Users/sauirbayseidulla/Desktop/MERN2/frontend-materialui/src/components/login.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Box,\n  Container,\n  Typography,\n  TextField,\n  Button,\n  Alert,\n  Paper,\n  IconButton,\n  InputAdornment,\n  CircularProgress,\n  useTheme,\n  useMediaQuery\n} from '@mui/material';\nimport { Visibility, VisibilityOff } from '@mui/icons-material';\nimport { AuthContext } from '../contexts/AuthContext';\nimport API_BASE_URL from '../config';\n\nconst Login = () => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const { login } = useContext(AuthContext);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [message, setMessage] = useState('');\n  const [messageType, setMessageType] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n  \n    try {\n      const response = await fetch(`${API_BASE_URL}/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username, password }),\n      });\n\n      const data = await response.json();\n      setIsLoading(false);\n\n      if (data.success) {\n        login(data.token, username);\n        navigate('/tovars');\n      } else {\n        setMessage(data.message || 'Authentication failed');\n        setMessageType('error');\n      }\n    } catch (error) {\n      setIsLoading(false);\n      setMessage('Login failed. Please try again.');\n      setMessageType('error');\n    }\n  };\n\n  return (\n    <Container\n      maxWidth=\"xs\"\n      sx={{\n        height: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        bgcolor: theme.palette.background.default\n      }}\n    >\n      <Paper\n        elevation={6}\n        sx={{\n          p: isMobile ? 3 : 5,\n          width: '100%',\n          borderRadius: 3,\n          boxShadow: theme.shadows[10],\n          transition: 'transform 0.3s',\n          '&:hover': {\n            transform: 'translateY(-2px)'\n          }\n        }}\n      >\n        <Box\n          component=\"form\"\n          onSubmit={handleSubmit}\n          sx={{\n            display: 'flex',\n            flexDirection: 'column',\n            gap: 3\n          }}\n        >\n          <Typography\n            variant={isMobile ? 'h5' : 'h4'}\n            align=\"center\"\n            fontWeight={700}\n            color=\"primary\"\n            sx={{ mb: 3 }}\n          >\n            Admin Login\n          </Typography>\n\n          {message && (\n            <Alert\n              severity={messageType === 'error' ? 'error' : 'success'}\n              sx={{\n                mb: 2,\n                border: `1px solid ${theme.palette[messageType].light}`,\n                bgcolor: theme.palette[messageType].lighter\n              }}\n            >\n              {message}\n            </Alert>\n          )}\n\n          <TextField\n            fullWidth\n            label=\"Username\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            required\n            autoFocus\n            InputProps={{\n              style: { borderRadius: 8 },\n            }}\n            InputLabelProps={{\n              shrink: true\n            }}\n            variant=\"outlined\"\n          />\n\n          <TextField\n            fullWidth\n            label=\"Password\"\n            type={showPassword ? 'text' : 'password'}\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            required\n            InputProps={{\n              style: { borderRadius: 8 },\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton\n                    onClick={() => setShowPassword(!showPassword)}\n                    edge=\"end\"\n                  >\n                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n            InputLabelProps={{\n              shrink: true\n            }}\n            variant=\"outlined\"\n          />\n\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            disabled={isLoading}\n            sx={{\n              mt: 2,\n              mb: 2,\n              borderRadius: 20,\n              py: 1.5,\n              boxShadow: theme.shadows[4],\n              transition: 'transform 0.2s',\n              '&:hover': {\n                transform: 'translateY(-1px)'\n              }\n            }}\n            startIcon={isLoading && <CircularProgress size={20} />}\n          >\n            {isLoading ? 'Signing In...' : 'Login'}\n          </Button>\n        </Box>\n      </Paper>\n    </Container>\n  );\n};\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}